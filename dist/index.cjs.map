{"version":3,"sources":["../src/index.ts"],"names":["Cookies","useState","useEffect","useCallback","useMemo"],"mappings":";;;;;;;;;;;;;;;;;;;;AAYA,IAAM,eAAA,GAAmBA,yBAAyC,OAAA,IAAWA,wBAAA;AAI7E,SAAS,WAAA,CACP,KACA,OAAA,EACoC;AACpC,EAAA,MAAM,MAAA,GAAS,GAAA,EAAK,GAAA,EAAK,OAAA,EAAS,MAAA;AAClC,EAAA,MAAM,EAAA,GAAK,IAAI,eAAA,CAAgB,MAAM,CAAA;AACrC,EAAA,OAAO,EAAA,CAAG,OAAO,OAAO,CAAA;AAC1B;AAIO,SAAS,WACd,OAAA,EAKA;AACA,EAAA,MAAM,SAAA,GAAY,MAAM,OAAO,MAAA,KAAW,WAAA;AAE1C,EAAA,MAAM,CAAC,OAAA,EAAS,UAAU,CAAA,GAAIC,eAA6C,MAAM;AAC/E,IAAA,IAAI,CAAC,SAAA,EAAU,EAAG,OAAO,EAAC;AAC1B,IAAA,OAAO,IAAI,eAAA,EAAgB,CAAE,MAAA,CAAO,OAAO,CAAA;AAAA,EAC7C,CAAC,CAAA;AAED,EAAAC,eAAA,CAAU,MAAM;AACd,IAAA,MAAM,EAAA,GAAK,IAAI,eAAA,EAAgB;AAC/B,IAAA,MAAM,eAAe,MAAM;AACzB,MAAA,UAAA,CAAW,EAAA,CAAG,MAAA,CAAO,OAAO,CAAC,CAAA;AAAA,IAC/B,CAAA;AACA,IAAA,EAAA,CAAG,kBAAkB,YAAY,CAAA;AACjC,IAAA,OAAO,MAAM;AACX,MAAA,EAAA,CAAG,qBAAqB,YAAY,CAAA;AAAA,IACtC,CAAA;AAAA,EACF,CAAA,EAAG,CAAC,OAAO,CAAC,CAAA;AAEZ,EAAA,MAAM,GAAA,GAAMC,iBAAA,CAAY,CAAC,GAAA,EAAa,OAAe,aAAA,KAAqC;AACxF,IAAA,MAAM,EAAA,GAAK,IAAI,eAAA,EAAgB;AAC/B,IAAA,EAAA,CAAG,GAAA,CAAI,GAAA,EAAK,KAAA,EAAO,aAAa,CAAA;AAAA,EAClC,CAAA,EAAG,EAAE,CAAA;AAEL,EAAA,MAAM,MAAA,GAASA,iBAAA,CAAY,CAAC,GAAA,EAAa,aAAA,KAAqC;AAC5E,IAAA,MAAM,EAAA,GAAK,IAAI,eAAA,EAAgB;AAC/B,IAAA,EAAA,CAAG,MAAA,CAAO,KAAK,aAAa,CAAA;AAAA,EAC9B,CAAA,EAAG,EAAE,CAAA;AAEL,EAAA,OAAOC,aAAA,CAAQ,MAAM,CAAC,OAAA,EAAS,GAAA,EAAK,MAAM,CAAA,EAAY,CAAC,OAAA,EAAS,GAAA,EAAK,MAAM,CAAC,CAAA;AAC9E;AAEO,SAAS,SAAA,CACd,GAAA,EACA,YAAA,EACA,OAAA,EACoE;AACpE,EAAA,MAAM,CAAC,OAAA,EAAS,SAAA,EAAW,YAAY,IAAI,UAAA,EAAW;AAEtD,EAAA,MAAM,QAAQ,OAAA,CAAQ,GAAG,MAAM,MAAA,GAAY,OAAA,CAAQ,GAAG,CAAA,GAAI,YAAA;AAE1D,EAAA,MAAM,GAAA,GAAMD,iBAAA;AAAA,IACV,CAAC,QAAA,KAAqB;AACpB,MAAA,SAAA,CAAU,GAAA,EAAK,UAAU,OAAO,CAAA;AAAA,IAClC,CAAA;AAAA,IACA,CAAC,GAAA,EAAK,OAAA,EAAS,SAAS;AAAA,GAC1B;AAEA,EAAA,MAAM,MAAA,GAASA,kBAAY,MAAM;AAC/B,IAAA,YAAA,CAAa,KAAK,OAAO,CAAA;AAAA,EAC3B,CAAA,EAAG,CAAC,GAAA,EAAK,OAAA,EAAS,YAAY,CAAC,CAAA;AAE/B,EAAA,OAAOC,aAAA,CAAQ,MAAM,CAAC,KAAA,EAA6B,GAAA,EAAK,MAAM,CAAA,EAAY,CAAC,KAAA,EAAO,GAAA,EAAK,MAAM,CAAC,CAAA;AAChG;AAEA,IAAO,aAAA,GAAQ","file":"index.cjs","sourcesContent":["import type { CookieGetOptions, CookieSetOptions } from 'universal-cookie';\nimport Cookies from 'universal-cookie';\nimport { useState, useEffect, useCallback, useMemo } from 'react';\n\ninterface NextCookiesContext {\n  req?: {\n    headers: {\n      cookie?: string;\n    };\n  };\n}\n\nconst UniversalCookie = (Cookies as { default?: typeof Cookies }).default || Cookies;\n\nexport interface CookieOptions extends CookieGetOptions, CookieSetOptions {}\n\nfunction nextCookies(\n  ctx: NextCookiesContext,\n  options?: CookieGetOptions\n): Record<string, string | undefined> {\n  const header = ctx?.req?.headers?.cookie;\n  const uc = new UniversalCookie(header);\n  return uc.getAll(options);\n}\n\nexport { nextCookies as getCookies };\n\nexport function useCookies(\n  options?: CookieGetOptions\n): readonly [\n  Record<string, string | undefined>,\n  (key: string, value: string, cookieOptions?: CookieSetOptions) => void,\n  (key: string, cookieOptions?: CookieSetOptions) => void,\n] {\n  const isBrowser = () => typeof window !== 'undefined';\n\n  const [cookies, setCookies] = useState<Record<string, string | undefined>>(() => {\n    if (!isBrowser()) return {};\n    return new UniversalCookie().getAll(options);\n  });\n\n  useEffect(() => {\n    const uc = new UniversalCookie();\n    const handleChange = () => {\n      setCookies(uc.getAll(options));\n    };\n    uc.addChangeListener(handleChange);\n    return () => {\n      uc.removeChangeListener(handleChange);\n    };\n  }, [options]);\n\n  const set = useCallback((key: string, value: string, cookieOptions?: CookieSetOptions) => {\n    const uc = new UniversalCookie();\n    uc.set(key, value, cookieOptions);\n  }, []);\n\n  const remove = useCallback((key: string, cookieOptions?: CookieSetOptions) => {\n    const uc = new UniversalCookie();\n    uc.remove(key, cookieOptions);\n  }, []);\n\n  return useMemo(() => [cookies, set, remove] as const, [cookies, set, remove]);\n}\n\nexport function useCookie(\n  key: string,\n  defaultValue?: string,\n  options?: CookieSetOptions\n): readonly [string | undefined, (value: string) => void, () => void] {\n  const [cookies, setCookie, removeCookie] = useCookies();\n\n  const value = cookies[key] !== undefined ? cookies[key] : defaultValue;\n\n  const set = useCallback(\n    (newValue: string) => {\n      setCookie(key, newValue, options);\n    },\n    [key, options, setCookie]\n  );\n\n  const remove = useCallback(() => {\n    removeCookie(key, options);\n  }, [key, options, removeCookie]);\n\n  return useMemo(() => [value as string | undefined, set, remove] as const, [value, set, remove]);\n}\n\nexport default nextCookies;\n"]}